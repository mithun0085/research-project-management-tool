import { combineReducers } from 'rdux';
import {
  SET_TIME,
  ADD_LOG,
  CLEAR_LOGS,
  CHECK_LOG_ITEM,
} from './actions';

const initialTimeReducerState = {
  time: (new Date()).getTime(),
};
const timeReducer = (state = initialTimeReducerState, { type, payload }) => {
  switch (type) {
    case SET_TIME:
      return {
        ...state,
        time: payload,
      };

    default:
      return state;
  }
};

const initialLogReducerState = {
  logs: [],
};
const logReducer = (state = initialLogReducerState, { type, payload }) => {
  switch (type) {
    case ADD_LOG:
      return {
        ...state,
        logs: state.logs.concat([{ text: payload, checked: false }]),
      };

    case CLEAR_LOGS:
      return {
        ...state,
        logs: [],
      };

    case CHECK_LOG_ITEM:
      const logs = [...state.logs];
      logs[payload] = {
        ...logs[payload],
        checked: !logs[payload].checked,
      };
      return {
        ...state,
        logs,
      };

    default:
      return state;
  }
};

export default combineReducers({
  time: timeReducer,
  log: logReducer,
});
