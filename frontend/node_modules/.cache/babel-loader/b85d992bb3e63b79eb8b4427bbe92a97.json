{"ast":null,"code":"var _jsxFileName = \"E:\\\\Group Projects\\\\AF Project\\\\research-project-management-tool\\\\frontend\\\\src\\\\App.js\";\nimport React, { useEffect } from 'react';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { dispatchLogin, fetchUser, dispatchGetUser } from './redux/actions/authAction';\nimport { FooterContainer } from './containers/footer';\nimport { Route } from \"react-router-dom\";\nimport VideoConference from \"./Pages/VideoConference\";\nimport AppChat from \"./Pages/AppChat\";\nimport Header from './components/header/Header';\nimport Body from './components/body/Body';\nimport axios from 'axios';\n\nfunction App() {\n  const dispatch = useDispatch();\n  const token = useSelector(state => state.token);\n  const auth = useSelector(state => state.auth);\n  useEffect(() => {\n    const firstLogin = localStorage.getItem('firstLogin');\n\n    if (firstLogin) {\n      const getToken = async () => {\n        const res = await axios.post('/user/refresh_token', null);\n        dispatch({\n          type: 'GET_TOKEN',\n          payload: res.data.access_token\n        });\n      };\n\n      getToken();\n    }\n  }, [auth.isLogged, dispatch]);\n  useEffect(() => {\n    if (token) {\n      const getUser = () => {\n        dispatch(dispatchLogin());\n        return fetchUser(token).then(res => {\n          dispatch(dispatchGetUser(res));\n        });\n      };\n\n      getUser();\n    }\n  }, [token, dispatch]);\n  return /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/video\",\n    component: VideoConference,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/chat\",\n    component: AppChat,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(FooterContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["E:/Group Projects/AF Project/research-project-management-tool/frontend/src/App.js"],"names":["React","useEffect","BrowserRouter","Router","useDispatch","useSelector","dispatchLogin","fetchUser","dispatchGetUser","FooterContainer","Route","VideoConference","AppChat","Header","Body","axios","App","dispatch","token","state","auth","firstLogin","localStorage","getItem","getToken","res","post","type","payload","data","access_token","isLogged","getUser","then"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAAQC,aAAa,IAAIC,MAAzB,QAAsC,kBAAtC;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,aAAvC;AACA,SAAQC,aAAR,EAAuBC,SAAvB,EAAkCC,eAAlC,QAAwD,4BAAxD;AACA,SAASC,eAAT,QAAgC,qBAAhC;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,OAAOC,eAAP,MAA4B,yBAA5B;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAGA,SAASC,GAAT,GAAe;AACb,QAAMC,QAAQ,GAAGb,WAAW,EAA5B;AACA,QAAMc,KAAK,GAAGb,WAAW,CAACc,KAAK,IAAIA,KAAK,CAACD,KAAhB,CAAzB;AACA,QAAME,IAAI,GAAGf,WAAW,CAACc,KAAK,IAAIA,KAAK,CAACC,IAAhB,CAAxB;AAEAnB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMoB,UAAU,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAnB;;AACA,QAAGF,UAAH,EAAc;AACZ,YAAMG,QAAQ,GAAG,YAAY;AAC3B,cAAMC,GAAG,GAAG,MAAMV,KAAK,CAACW,IAAN,CAAW,qBAAX,EAAkC,IAAlC,CAAlB;AACAT,QAAAA,QAAQ,CAAC;AAACU,UAAAA,IAAI,EAAE,WAAP;AAAoBC,UAAAA,OAAO,EAAEH,GAAG,CAACI,IAAJ,CAASC;AAAtC,SAAD,CAAR;AACD,OAHD;;AAIAN,MAAAA,QAAQ;AACT;AACF,GATQ,EASP,CAACJ,IAAI,CAACW,QAAN,EAAgBd,QAAhB,CATO,CAAT;AAWAhB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAGiB,KAAH,EAAS;AACP,YAAMc,OAAO,GAAG,MAAM;AACpBf,QAAAA,QAAQ,CAACX,aAAa,EAAd,CAAR;AAEA,eAAOC,SAAS,CAACW,KAAD,CAAT,CAAiBe,IAAjB,CAAsBR,GAAG,IAAI;AAClCR,UAAAA,QAAQ,CAACT,eAAe,CAACiB,GAAD,CAAhB,CAAR;AACD,SAFM,CAAP;AAGD,OAND;;AAOAO,MAAAA,OAAO;AACR;AACF,GAXQ,EAWP,CAACd,KAAD,EAAQD,QAAR,CAXO,CAAT;AAcA,sBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACU,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADV,eAGE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,QAAZ;AAAqB,IAAA,SAAS,EAAEN,eAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,OAAZ;AAAoB,IAAA,SAAS,EAAEC,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CAHF,eAQE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,CADF;AAaD;;AAED,eAAeI,GAAf","sourcesContent":["import React, {useEffect} from 'react';\nimport {BrowserRouter as Router} from 'react-router-dom'\nimport {useDispatch, useSelector} from 'react-redux'\nimport {dispatchLogin, fetchUser, dispatchGetUser} from './redux/actions/authAction'\nimport { FooterContainer } from './containers/footer'\nimport { Route } from \"react-router-dom\";\nimport VideoConference from \"./Pages/VideoConference\";\nimport AppChat from \"./Pages/AppChat\";\nimport Header from './components/header/Header'\nimport Body from './components/body/Body'\nimport axios from 'axios';\n\n\nfunction App() {\n  const dispatch = useDispatch()\n  const token = useSelector(state => state.token)\n  const auth = useSelector(state => state.auth)\n\n  useEffect(() => {\n    const firstLogin = localStorage.getItem('firstLogin')\n    if(firstLogin){\n      const getToken = async () => {\n        const res = await axios.post('/user/refresh_token', null)\n        dispatch({type: 'GET_TOKEN', payload: res.data.access_token})\n      }\n      getToken()\n    }\n  },[auth.isLogged, dispatch])\n\n  useEffect(() => {\n    if(token){\n      const getUser = () => {\n        dispatch(dispatchLogin())\n\n        return fetchUser(token).then(res => {\n          dispatch(dispatchGetUser(res))\n        })\n      }\n      getUser()\n    }\n  },[token, dispatch])\n\n\n  return (\n    <Router>\n              <Header />\n\n      <div className=\"App\">\n        <Route path=\"/video\" component={VideoConference} />\n        <Route path=\"/chat\" component={AppChat} />\n        <Body />\n      </div>\n      <FooterContainer/>\n\n    </Router>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}