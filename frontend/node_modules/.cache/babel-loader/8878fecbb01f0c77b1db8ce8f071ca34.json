{"ast":null,"code":"var _jsxFileName = \"E:\\\\Group Projects\\\\AF Project\\\\research-project-management-tool\\\\frontend\\\\src\\\\components\\\\body\\\\auth\\\\Login.js\";\nimport React, { useState } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { showErrMsg, showSuccessMsg } from '../../utils/notification/Notification';\nimport { dispatchLogin } from '../../../redux/actions/authAction';\nimport { useDispatch } from 'react-redux';\nimport { GoogleLogin } from 'react-google-login';\nimport FacebookLogin from 'react-facebook-login';\nconst initialState = {\n  email: '',\n  password: '',\n  err: '',\n  success: ''\n};\n\nfunction Login() {\n  const [user, setUser] = useState(initialState);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const {\n    email,\n    password,\n    err,\n    success\n  } = user;\n\n  const handleChangeInput = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setUser({ ...user,\n      [name]: value,\n      err: '',\n      success: ''\n    });\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    try {\n      const res = await axios.post('/user/login', {\n        email,\n        password\n      });\n      setUser({ ...user,\n        err: '',\n        success: res.data.msg\n      });\n      localStorage.setItem('firstLogin', true);\n      dispatch(dispatchLogin());\n      history.push(\"/\");\n    } catch (err) {\n      err.response.data.msg && setUser({ ...user,\n        err: err.response.data.msg,\n        success: ''\n      });\n    }\n  };\n\n  const responseGoogle = async response => {\n    try {\n      const res = await axios.post('/user/google_login', {\n        tokenId: response.tokenId\n      });\n      setUser({ ...user,\n        error: '',\n        success: res.data.msg\n      });\n      localStorage.setItem('firstLogin', true);\n      dispatch(dispatchLogin());\n      history.push('/');\n    } catch (err) {\n      err.response.data.msg && setUser({ ...user,\n        err: err.response.data.msg,\n        success: ''\n      });\n    }\n  };\n\n  const responseFacebook = async response => {\n    try {\n      const {\n        accessToken,\n        userID\n      } = response;\n      const res = await axios.post('/user/facebook_login', {\n        accessToken,\n        userID\n      });\n      setUser({ ...user,\n        error: '',\n        success: res.data.msg\n      });\n      localStorage.setItem('firstLogin', true);\n      dispatch(dispatchLogin());\n      history.push('/');\n    } catch (err) {\n      err.response.data.msg && setUser({ ...user,\n        err: err.response.data.msg,\n        success: ''\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login_page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, \"Login\"), err && showErrMsg(err), success && showSuccessMsg(success), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, \"Email Address\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Enter email address\",\n    id: \"email\",\n    value: email,\n    name: \"email\",\n    onChange: handleChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    placeholder: \"Enter password\",\n    id: \"password\",\n    value: password,\n    name: \"password\",\n    onChange: handleChangeInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/forgot_password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 21\n    }\n  }, \"Forgot your password?\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"hr\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, \"Or Login With\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"social\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(GoogleLogin, {\n    clientId: \"56995160338-71vdh2sdakkcdagjk1tibu5vhfrm742b.apps.googleusercontent.com\",\n    buttonText: \"Login with google\",\n    onSuccess: responseGoogle,\n    cookiePolicy: 'single_host_origin',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(FacebookLogin, {\n    appId: \"283173690311260\",\n    autoLoad: false,\n    fields: \"name,email,picture\",\n    callback: responseFacebook,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, \"New User? \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 26\n    }\n  }, \"Register\")));\n}\n\nexport default Login;","map":{"version":3,"sources":["E:/Group Projects/AF Project/research-project-management-tool/frontend/src/components/body/auth/Login.js"],"names":["React","useState","Link","useHistory","axios","showErrMsg","showSuccessMsg","dispatchLogin","useDispatch","GoogleLogin","FacebookLogin","initialState","email","password","err","success","Login","user","setUser","dispatch","history","handleChangeInput","e","name","value","target","handleSubmit","preventDefault","res","post","data","msg","localStorage","setItem","push","response","responseGoogle","tokenId","error","responseFacebook","accessToken","userID"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,UAAR,EAAoBC,cAApB,QAAyC,uCAAzC;AACA,SAAQC,aAAR,QAA4B,mCAA5B;AACA,SAAQC,WAAR,QAA0B,aAA1B;AACA,SAASC,WAAT,QAA4B,oBAA5B;AACA,OAAOC,aAAP,MAA0B,sBAA1B;AAGA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,KAAK,EAAE,EADU;AAEjBC,EAAAA,QAAQ,EAAE,EAFO;AAGjBC,EAAAA,GAAG,EAAE,EAHY;AAIjBC,EAAAA,OAAO,EAAE;AAJQ,CAArB;;AAOA,SAASC,KAAT,GAAiB;AACb,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBjB,QAAQ,CAACU,YAAD,CAAhC;AACA,QAAMQ,QAAQ,GAAGX,WAAW,EAA5B;AACA,QAAMY,OAAO,GAAGjB,UAAU,EAA1B;AAEA,QAAM;AAACS,IAAAA,KAAD;AAAQC,IAAAA,QAAR;AAAkBC,IAAAA,GAAlB;AAAuBC,IAAAA;AAAvB,MAAkCE,IAAxC;;AAEA,QAAMI,iBAAiB,GAAGC,CAAC,IAAI;AAC3B,UAAM;AAACC,MAAAA,IAAD;AAAOC,MAAAA;AAAP,QAAgBF,CAAC,CAACG,MAAxB;AACAP,IAAAA,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAU,OAACM,IAAD,GAAOC,KAAjB;AAAwBV,MAAAA,GAAG,EAAE,EAA7B;AAAiCC,MAAAA,OAAO,EAAE;AAA1C,KAAD,CAAP;AACH,GAHD;;AAMA,QAAMW,YAAY,GAAG,MAAMJ,CAAN,IAAW;AAC5BA,IAAAA,CAAC,CAACK,cAAF;;AACA,QAAI;AACA,YAAMC,GAAG,GAAG,MAAMxB,KAAK,CAACyB,IAAN,CAAW,aAAX,EAA0B;AAACjB,QAAAA,KAAD;AAAQC,QAAAA;AAAR,OAA1B,CAAlB;AACAK,MAAAA,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAUH,QAAAA,GAAG,EAAE,EAAf;AAAmBC,QAAAA,OAAO,EAAEa,GAAG,CAACE,IAAJ,CAASC;AAArC,OAAD,CAAP;AAEAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmC,IAAnC;AAEAd,MAAAA,QAAQ,CAACZ,aAAa,EAAd,CAAR;AACAa,MAAAA,OAAO,CAACc,IAAR,CAAa,GAAb;AAEH,KATD,CASE,OAAOpB,GAAP,EAAY;AACVA,MAAAA,GAAG,CAACqB,QAAJ,CAAaL,IAAb,CAAkBC,GAAlB,IACAb,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAUH,QAAAA,GAAG,EAAEA,GAAG,CAACqB,QAAJ,CAAaL,IAAb,CAAkBC,GAAjC;AAAsChB,QAAAA,OAAO,EAAE;AAA/C,OAAD,CADP;AAEH;AACJ,GAfD;;AAiBA,QAAMqB,cAAc,GAAG,MAAOD,QAAP,IAAoB;AACvC,QAAI;AACA,YAAMP,GAAG,GAAG,MAAMxB,KAAK,CAACyB,IAAN,CAAW,oBAAX,EAAiC;AAACQ,QAAAA,OAAO,EAAEF,QAAQ,CAACE;AAAnB,OAAjC,CAAlB;AAEAnB,MAAAA,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAUqB,QAAAA,KAAK,EAAC,EAAhB;AAAoBvB,QAAAA,OAAO,EAAEa,GAAG,CAACE,IAAJ,CAASC;AAAtC,OAAD,CAAP;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmC,IAAnC;AAEAd,MAAAA,QAAQ,CAACZ,aAAa,EAAd,CAAR;AACAa,MAAAA,OAAO,CAACc,IAAR,CAAa,GAAb;AACH,KARD,CAQE,OAAOpB,GAAP,EAAY;AACVA,MAAAA,GAAG,CAACqB,QAAJ,CAAaL,IAAb,CAAkBC,GAAlB,IACAb,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAUH,QAAAA,GAAG,EAAEA,GAAG,CAACqB,QAAJ,CAAaL,IAAb,CAAkBC,GAAjC;AAAsChB,QAAAA,OAAO,EAAE;AAA/C,OAAD,CADP;AAEH;AACJ,GAbD;;AAeA,QAAMwB,gBAAgB,GAAG,MAAOJ,QAAP,IAAoB;AACzC,QAAI;AACA,YAAM;AAACK,QAAAA,WAAD;AAAcC,QAAAA;AAAd,UAAwBN,QAA9B;AACA,YAAMP,GAAG,GAAG,MAAMxB,KAAK,CAACyB,IAAN,CAAW,sBAAX,EAAmC;AAACW,QAAAA,WAAD;AAAcC,QAAAA;AAAd,OAAnC,CAAlB;AAEAvB,MAAAA,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAUqB,QAAAA,KAAK,EAAC,EAAhB;AAAoBvB,QAAAA,OAAO,EAAEa,GAAG,CAACE,IAAJ,CAASC;AAAtC,OAAD,CAAP;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,YAArB,EAAmC,IAAnC;AAEAd,MAAAA,QAAQ,CAACZ,aAAa,EAAd,CAAR;AACAa,MAAAA,OAAO,CAACc,IAAR,CAAa,GAAb;AACH,KATD,CASE,OAAOpB,GAAP,EAAY;AACVA,MAAAA,GAAG,CAACqB,QAAJ,CAAaL,IAAb,CAAkBC,GAAlB,IACAb,OAAO,CAAC,EAAC,GAAGD,IAAJ;AAAUH,QAAAA,GAAG,EAAEA,GAAG,CAACqB,QAAJ,CAAaL,IAAb,CAAkBC,GAAjC;AAAsChB,QAAAA,OAAO,EAAE;AAA/C,OAAD,CADP;AAEH;AACJ,GAdD;;AAgBA,sBACI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,EAEKD,GAAG,IAAIT,UAAU,CAACS,GAAD,CAFtB,EAGKC,OAAO,IAAIT,cAAc,CAACS,OAAD,CAH9B,eAKI;AAAM,IAAA,QAAQ,EAAEW,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,eAEI;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,WAAW,EAAC,qBAA/B;AAAqD,IAAA,EAAE,EAAC,OAAxD;AACA,IAAA,KAAK,EAAEd,KADP;AACc,IAAA,IAAI,EAAC,OADnB;AAC2B,IAAA,QAAQ,EAAES,iBADrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADJ,eAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,OAAO,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAO,IAAA,IAAI,EAAC,UAAZ;AAAuB,IAAA,WAAW,EAAC,gBAAnC;AAAoD,IAAA,EAAE,EAAC,UAAvD;AACA,IAAA,KAAK,EAAER,QADP;AACiB,IAAA,IAAI,EAAC,UADtB;AACiC,IAAA,QAAQ,EAAEQ,iBAD3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CAPJ,eAaI;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADJ,eAEI,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,kBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAFJ,CAbJ,CALJ,eAwBI;AAAK,IAAA,SAAS,EAAC,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAxBJ,eA0BI;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,WAAD;AACI,IAAA,QAAQ,EAAC,yEADb;AAEI,IAAA,UAAU,EAAC,mBAFf;AAGI,IAAA,SAAS,EAAEe,cAHf;AAII,IAAA,YAAY,EAAE,oBAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAQI,oBAAC,aAAD;AACA,IAAA,KAAK,EAAC,iBADN;AAEA,IAAA,QAAQ,EAAE,KAFV;AAGA,IAAA,MAAM,EAAC,oBAHP;AAIA,IAAA,QAAQ,EAAEG,gBAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARJ,CA1BJ,eA2CI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAa,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,WAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAb,CA3CJ,CADJ;AA+CH;;AAED,eAAevB,KAAf","sourcesContent":["import React, {useState} from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport axios from 'axios'\nimport {showErrMsg, showSuccessMsg} from '../../utils/notification/Notification'\nimport {dispatchLogin} from '../../../redux/actions/authAction'\nimport {useDispatch} from 'react-redux'\nimport { GoogleLogin } from 'react-google-login';\nimport FacebookLogin from 'react-facebook-login';\n\n\nconst initialState = {\n    email: '',\n    password: '',\n    err: '',\n    success: ''\n}\n\nfunction Login() {\n    const [user, setUser] = useState(initialState)\n    const dispatch = useDispatch()\n    const history = useHistory()\n\n    const {email, password, err, success} = user\n\n    const handleChangeInput = e => {\n        const {name, value} = e.target\n        setUser({...user, [name]:value, err: '', success: ''})\n    }\n\n\n    const handleSubmit = async e => {\n        e.preventDefault()\n        try {\n            const res = await axios.post('/user/login', {email, password})\n            setUser({...user, err: '', success: res.data.msg})\n\n            localStorage.setItem('firstLogin', true)\n\n            dispatch(dispatchLogin())\n            history.push(\"/\")\n\n        } catch (err) {\n            err.response.data.msg && \n            setUser({...user, err: err.response.data.msg, success: ''})\n        }\n    }\n\n    const responseGoogle = async (response) => {\n        try {\n            const res = await axios.post('/user/google_login', {tokenId: response.tokenId})\n\n            setUser({...user, error:'', success: res.data.msg})\n            localStorage.setItem('firstLogin', true)\n\n            dispatch(dispatchLogin())\n            history.push('/')\n        } catch (err) {\n            err.response.data.msg && \n            setUser({...user, err: err.response.data.msg, success: ''})\n        }\n    }\n\n    const responseFacebook = async (response) => {\n        try {\n            const {accessToken, userID} = response\n            const res = await axios.post('/user/facebook_login', {accessToken, userID})\n\n            setUser({...user, error:'', success: res.data.msg})\n            localStorage.setItem('firstLogin', true)\n\n            dispatch(dispatchLogin())\n            history.push('/')\n        } catch (err) {\n            err.response.data.msg && \n            setUser({...user, err: err.response.data.msg, success: ''})\n        }\n    }\n\n    return (\n        <div className=\"login_page\">\n            <h2>Login</h2>\n            {err && showErrMsg(err)}\n            {success && showSuccessMsg(success)}\n\n            <form onSubmit={handleSubmit}>\n                <div>\n                    <label htmlFor=\"email\">Email Address</label>\n                    <input type=\"text\" placeholder=\"Enter email address\" id=\"email\"\n                    value={email} name=\"email\" onChange={handleChangeInput} />\n                </div>\n\n                <div>\n                    <label htmlFor=\"password\">Password</label>\n                    <input type=\"password\" placeholder=\"Enter password\" id=\"password\"\n                    value={password} name=\"password\" onChange={handleChangeInput} />\n                </div>\n\n                <div className=\"row\">\n                    <button type=\"submit\">Login</button>\n                    <Link to=\"/forgot_password\">Forgot your password?</Link>\n                </div>\n            </form>\n\n            <div className=\"hr\">Or Login With</div>\n\n            <div className=\"social\">\n                <GoogleLogin\n                    clientId=\"56995160338-71vdh2sdakkcdagjk1tibu5vhfrm742b.apps.googleusercontent.com\"\n                    buttonText=\"Login with google\"\n                    onSuccess={responseGoogle}\n                    cookiePolicy={'single_host_origin'}\n                />\n                \n                <FacebookLogin\n                appId=\"283173690311260\"\n                autoLoad={false}\n                fields=\"name,email,picture\"\n                callback={responseFacebook} \n                />\n\n            </div>\n\n            <p>New User? <Link to=\"/register\">Register</Link></p>\n        </div>\n    )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}